<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calendário Escolar 2026</title>

<style>

/* BASE */

body{
font-family:Segoe UI;
margin:0;
background:#f8fafc;
-webkit-tap-highlight-color:transparent;
}

.top-bar{
height:6px;
background:linear-gradient(to right,#002776 60%,#bf0a30 60%);
}

header,footer{
text-align:center;
background:white;
color:#002776;
padding:18px;
border-bottom:3px solid #bf0a30;
}

.container{
max-width:1400px;
margin:auto;
padding:20px;
}

/* ANIMAÇÃO */

.fade{
animation:fade .35s ease;
}

@keyframes fade{
from{opacity:0;transform:translateY(6px)}
to{opacity:1}
}

/* MODO ANO */

.month-grid{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:15px;
}

.month-card{
background:white;
padding:22px;
border-radius:14px;
border:1px solid #e2e8f0;
cursor:pointer;
transition:.25s;
text-align:center;
font-weight:600;
font-size:18px;
}

.month-card:hover{
transform:scale(1.05);
border-color:#002776;
}

/* MODO MÊS */

.month-header{
display:flex;
justify-content:center;
align-items:center;
gap:25px;
margin-bottom:15px;
}

.arrow{
font-size:32px;
cursor:pointer;
color:#002776;
font-weight:bold;
user-select:none;
padding:8px 14px;
border-radius:10px;
}

.arrow:active{
background:#e2e8f0;
}

/* DIAS */

.week-header{
display:grid;
grid-template-columns:repeat(7,1fr);
text-align:center;
font-weight:bold;
margin-bottom:6px;
}

.days-grid{
display:grid;
grid-template-columns:repeat(7,1fr);
gap:6px;
}

.day{
background:white;
border-radius:12px;
padding:8px;
min-height:100px;
cursor:pointer;
transition:.2s;
}

.day:hover{
transform:scale(1.04);
box-shadow:0 6px 16px rgba(0,0,0,.2);
}

.day:active{
transform:scale(.97);
}

.today{
box-shadow:
0 0 12px #3b82f6,
0 0 22px rgba(59,130,246,.7);
border:2px solid #3b82f6;
}

.event-label{
font-size:11px;
margin-top:4px;
font-weight:600;
line-height:1.2;
}

/* LEGENDA */

.legend{
margin-top:20px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:10px;
}

.legend-item{
background:white;
padding:12px;
border-radius:10px;
display:flex;
align-items:center;
gap:10px;
border:1px solid #e2e8f0;
font-size:14px;
}

.legend-color{
width:18px;
height:18px;
border-radius:4px;
}

/* MODAL */

.modal{
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,.7);
align-items:center;
justify-content:center;
z-index:999;
}

.modal-box{
background:white;
padding:25px;
border-radius:18px;
max-width:420px;
width:92%;
max-height:80vh;
overflow-y:auto;
}

/* BOTÃO */

button{
margin-top:20px;
padding:12px 18px;
border:none;
border-radius:10px;
background:#002776;
color:white;
cursor:pointer;
font-size:16px;
}

/* MOBILE */

@media (max-width:900px){
.month-grid{grid-template-columns:repeat(3,1fr);}
}

@media (max-width:650px){

header h1{font-size:22px;}
header h2{font-size:18px;}
header h3{font-size:15px;}

.month-grid{grid-template-columns:repeat(2,1fr);}
.legend{grid-template-columns:1fr;}

.day{min-height:85px;}
.event-label{font-size:10px;}

.arrow{font-size:36px;}
}

@media (max-width:420px){
.day{min-height:78px;}
.event-label{font-size:9px;}
}

</style>
</head>

<body>

<div class="top-bar"></div>

<header>
<h3>Estado da Bahia — Do lado da Gente — 2026</h3>
<h2>Colégio Estadual Rolando Laranjeira Barbosa</h2>
<h1>Calendário Escolar 2026</h1>
</header>

<div class="container">
<div id="calendar"></div>
</div>

<footer>
Colégio Estadual Rolando Laranjeira Barbosa<br>
Estado da Bahia — Do lado da Gente — 2026<br>
Santa Maria da Vitória
</footer>

<div class="modal" id="modal">
<div class="modal-box" id="modalBox"></div>
</div>

<script>

/* CORES */

const cores={
"Avaliação":"#facc15",
"Recesso":"#2dd4bf",
"Feriado Nacional":"#ef4444",
"Feriado Estadual":"#f97316",
"Administrativo":"#3b82f6",
"Projeto":"#8b5cf6",
"Comunidade":"#06b6d4",
"Unidade":"#16a34a",
"Conselho":"#6366f1",
"Reunião":"#14b8a6"
};

function dataBR(d){
return new Date(d).toLocaleDateString("pt-BR").replaceAll("/",".");
}

/* EVENTOS */

const eventos = [...]; // COLE SUA LISTA COMPLETA AQUI (a mesma que você já tem)

/* ENGINE ORIGINAL */

function eventosDia(d){
return eventos.filter(e=>{
if(e.data) return e.data===d;
return d>=e.inicio && d<=e.fim;
});
}

function ehFimSemana(d){
let dia=new Date(d).getDay();
return dia===0 || dia===6;
}

function pintaFimSemana(e){
if(e.tipo==="Recesso") return true;
if(e.nome.toLowerCase().includes("saco cheio")) return true;
return false;
}

function eventosDiaRender(d){
let lista=eventosDia(d);
if(!ehFimSemana(d)) return lista;
return lista.filter(e=>pintaFimSemana(e));
}

function inicioFim(e,d){
if(e.data) return true;
return d===e.inicio || d===e.fim;
}

function gradiente(lista){
if(lista.length===1) return cores[lista[0].tipo];
let step=100/lista.length;
let g="linear-gradient(to right,";
lista.forEach((e,i)=>{
let s=i*step;
let f=(i+1)*step;
g+=`${cores[e.tipo]} ${s}%,${cores[e.tipo]} ${f}%,`;
});
return g.slice(0,-1)+")";
}

/* MODAL */

const modal=document.getElementById("modal");
const modalBox=document.getElementById("modalBox");

function abrirModal(lista,data){
modal.style.display="flex";
modalBox.innerHTML="<h3>"+dataBR(data)+"</h3>";
lista.forEach(e=>{
modalBox.innerHTML+=`<p>${e.nome}<br>${dataBR(e.data||e.inicio)} até ${dataBR(e.fim||e.data)}</p>`;
});
modalBox.innerHTML+=`<button onclick="modal.style.display='none'">Fechar</button>`;
}

modal.onclick=e=>{
if(e.target===modal) modal.style.display="none";
};

/* CALENDÁRIO */

const meses=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];
const semana=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"];

let mesAtual=new Date().getMonth();
const hoje=new Date().toISOString().split("T")[0];

const calendar=document.getElementById("calendar");

/* MODO ANO */

function renderAno(){

calendar.className="fade";

let html='<div class="month-grid">';

meses.forEach((m,i)=>{
html+=`<div class="month-card" onclick="abrirMes(${i})">${m}</div>`;
});

html+='</div>';

html+='<h3>Legenda Geral</h3><div class="legend">';

Object.keys(cores).forEach(t=>{
html+=`
<div class="legend-item">
<div class="legend-color" style="background:${cores[t]}"></div>
${t}
</div>`;
});

html+='</div>';

calendar.innerHTML=html;
}

/* MODO MÊS */

function abrirMes(m){
mesAtual=m;
renderMes();
}

function renderMes(){

calendar.className="fade";

let m=mesAtual;

let html=`
<div class="month-header">
<div class="arrow" onclick="mesAnterior()">◀</div>
<h2>${meses[m]}</h2>
<div class="arrow" onclick="proximoMes()">▶</div>
</div>
`;

html+='<div class="week-header">';
semana.forEach(d=> html+=`<div>${d}</div>`);
html+='</div>';

html+='<div class="days-grid">';

let dias=new Date(2026,m+1,0).getDate();
let primeiroDia=new Date(2026,m,1).getDay();

for(let i=0;i<primeiroDia;i++) html+="<div></div>";

let tiposMes=new Set();

for(let d=1; d<=dias; d++){

let data=`2026-${String(m+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
let lista=eventosDiaRender(data);

lista.forEach(e=>tiposMes.add(e.tipo));

let bg=lista.length?gradiente(lista):"white";
let classeHoje=(data===hoje)?"today":"";

html+=`<div class="day ${classeHoje}" style="background:${bg}" onclick='abrirModal(${JSON.stringify(lista)},"${data}")'>
<b>${d}</b>`;

lista.forEach(e=>{
if(inicioFim(e,data)){
html+=`<div class="event-label">${e.nome}</div>`;
}
});

html+=`</div>`;
}

html+='</div>';

html+='<div class="legend">';
tiposMes.forEach(t=>{
html+=`
<div class="legend-item">
<div class="legend-color" style="background:${cores[t]}"></div>
${t}
</div>`;
});
html+='</div>';

html+=`<button onclick="renderAno()">Voltar para Ano</button>`;

calendar.innerHTML=html;
}

function proximoMes(){
mesAtual=(mesAtual+1)%12;
renderMes();
}

function mesAnterior(){
mesAtual=(mesAtual-1+12)%12;
renderMes();
}

renderAno();

</script>

</body>
</html>
